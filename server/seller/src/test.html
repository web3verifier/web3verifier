
<HTML>
<BODY>
    <table border=1>
        <tr><td align="center">
            <div id="web3verifier"
                 verify_type            ="sign_in"
                 token_signed_by_server ="token"
                 callback_func          ="createSession" >
            </div>
            <script src='https://192.168.15.6:4433/verify_v0.7.js'></script>
            <script>
                function createSession( client_id, token_signed_by_client ){
                    console.log("createSession")

                    // Send the idToken to the server for verification
                    const xhr = new XMLHttpRequest();
                    xhr.open('POST', './create_session');
                    xhr.setRequestHeader('Content-Type', 'application/json');
                    xhr.onreadystatechange = function() {
                        if (xhr.readyState === XMLHttpRequest.DONE) {
                            if (xhr.status === 200) {
                                console.log( "Verification successful" )
                                window.location.href = './ok.html';
                            } else {
                                console.log('Token verification failed');
                            }
                        }
                    };
                    console.log( token_signed_by_client );
                    xhr.send(JSON.stringify({ client_id, token_signed_by_client }));
                }
            </script>
        </td></tr>
    </table>
</BODY>
</HTML>
